<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<head>
	<title>책마루 :: 장바구니</title>

	<!-- { 이 페이지에서만 쓰는 css, script 등 } -->
	<!-- <link rel="stylesheet" th:href="@{css/reset.css}"> -->
	<script th:src="@{/js/mycart_payment.js}" type="text/javascript"></script>
</head>

<div id="cart" class="content-wrap" layout:fragment="content">
	<h2 class="title">내 장바구니</h2>

	<div class="content">
		<form class="form" th:action="@{redirect:/mypage/member_cart_form}" name="membercart_form" method="post">

			<div class="cart-wrap" th:each="memberCartDtos : ${memberCartDtos}">
				
				<div class="cart-result">
					<div class="cart-book-img">
						<a th:href="@{/book/view/{b_no}(b_no=${memberCartDtos.b_no})}">
							<img th:src="@{${memberCartDtos.b_thumbnail}}" alt="book_thumbnail" />
						</a>
					</div>
					<div class="cart-book-name-price">
						<p th:text="${memberCartDtos.b_name}">도서 제목</p>
						<p th:text="${memberCartDtos.b_price}">책 가격</p>
					</div>
					<div class="cart-count-modify">
						<input type="number" name="c_book_count" th:value="${memberCartDtos.c_book_count}" />
						<button type="button" class="modify-count btn" onclick="bookCountSubmit();"
							th:data-link="@{/mypage/cart_modify_form(c_no=${memberCartDtos.c_no})}">수량 변경
						</button>
					</div>
					<div class="cart-pay">
						<p>
							[[${memberCartDtos.b_price}]] 포인트 <i class="fa-solid fa-xmark"></i> [[${memberCartDtos.c_book_count}]] 권<br>
							[[${memberCartDtos.c_book_count * memberCartDtos.b_price}]] 포인트
						</p>
						<a class="btn main" th:href="@{/mypage/payment_form(c_no=${memberCartDtos.c_no})}">결제하기</a>
						&nbsp;&nbsp;
						<a class="btn sub" th:href="@{/mypage/delete_mycart_confirm(c_no=${memberCartDtos.c_no})}"><i class="fa-solid fa-xmark"></i></a>
					</div>
				</div>
			</div>

			<div>
				<a th:href="@{/mypage/all_payment_form}">모두 결제하기</a>
			</div>

		</form>
	</div>
</div>

</html>